{
  "hash": "a3b68510d98c0332d8123f9ce40ffaf0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"An example exploratory analysis script\"\nauthor: \"Andreas Handel\"\ndate: \"10/28/2021\"\noutput: html_document\n---\n\n\n\n  \n  \nThis Quarto file loads the cleaned data and does some exploring.\n\nI'm only showing it the way where the code is included in the file. \nAs described in the `processing_code` materials, I currently prefer the approach of having R code in a separate file and pulling it in.\n\nBut I already had this written and haven't yet re-done it that way. Feel free to redo and send a pull request on GitHub :)\n\nAgain, it is largely a matter of preference and what makes the most sense to decide if one wants to have code inside Quarto files, or as separate R files.\nAnd sometimes, an R script with enough comments is good enough and one doesn't need a Quarto file.\n\nAlso note that while here I split cleaning and exploring, this is iterative. You saw that as part of the processing, we already had to explore the data somewhat to understand how to clean it. In general, as you explore, you'll find things that need cleaning. As you clean, you can explore more. Therefore, at times it might make more sense to combine the cleaning and exploring code parts into a single R or Quarto file. Or split things in any other logical way.\n\nAs part of the exploratory analysis, you should produce plots or tables or other summary quantities for the most interesting/important quantities in your data. Depending on the total number of variables in your dataset, explore all or some of the others. Figures produced here might be histograms or density plots, correlation plots, etc. Tables might summarize your data.\n\nStart by exploring one variable at a time. Then continue by creating plots or tables of the outcome(s) of interest and the predictor/exposure/input variables you are most interested in. If your dataset is small, you can do that for all variables. \n\nPlots produced here can be scatterplots, boxplots, violinplots, etc. Tables can be simple 2x2 tables or larger ones.\n\n# Setup\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#load needed packages. make sure they are installed.\nlibrary(here) #for data loading/saving\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nhere() starts at C:/Users/mn27712/MADA_NEW/muhammadnasir-mada2025-portofolio\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'dplyr' was built under R version 4.4.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(skimr)\nlibrary(ggplot2)\n```\n:::\n\n\n\n\nLoad the data.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Path to data. Note the use of the here() package and not absolute paths\ndata_location <- here::here(\"starter-analysis-exercise\",\"data\",\"processed-data\",\"processeddata2.rds\")\n#load data\nmydata <- readRDS(data_location)\n```\n:::\n\n\n\n\n\n\n\n# Data exploration through tables\n\nShowing a bit of code to produce and save a summary table.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary_df = skimr::skim(mydata)\nprint(summary_df)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n── Data Summary ────────────────────────\n                           Values\nName                       mydata\nNumber of rows             9     \nNumber of columns          6     \n_______________________          \nColumn type frequency:           \n  factor                   3     \n  numeric                  3     \n________________________         \nGroup variables            None  \n\n── Variable type: factor ───────────────────────────────────────────────────────\n  skim_variable n_missing complete_rate ordered n_unique top_counts      \n1 Gender                0             1 FALSE          3 M: 4, F: 3, O: 2\n2 Agecat                0             1 FALSE          3 3: 4, 2: 3, 0: 2\n3 Emp_status            0             1 FALSE          3 3: 4, 2: 3, 0: 2\n\n── Variable type: numeric ──────────────────────────────────────────────────────\n  skim_variable n_missing complete_rate  mean   sd  p0 p25 p50 p75 p100 hist \n1 Height                0             1 166.  16.0 133 156 166 178  183 ▂▁▃▃▇\n2 Weight                0             1  70.1 21.2  45  55  70  80  110 ▇▂▃▂▂\n3 Chol                  0             1 201.  63.2 120 160 176 243  310 ▅▇▁▇▂\n```\n\n\n:::\n\n```{.r .cell-code}\n# save to file\nsummarytable_file = here(\"starter-analysis-exercise\",\"results\", \"tables-files\", \"summarytable.rds\")\nsaveRDS(summary_df, file = summarytable_file)\n```\n:::\n\n\n\nWe are saving the results to the `results/tables` folder. Structure the folders inside `results` such that they make sense for your specific analysis. Provide enough documentation that someone can understand what you are doing and what goes where. `readme.md` files inside each folder are a good idea.\n\n\n# Data exploration through figures\n\nHistogram plots for the continuous outcomes. \n\nHeight first.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1 <- mydata %>% ggplot(aes(x=Height)) + geom_histogram() \nplot(p1)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](eda2_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\nfigure_file = here(\"starter-analysis-exercise\",\"results\",\"figures\",\"height-distribution.png\")\nggsave(filename = figure_file, plot=p1) \n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nSaving 7 x 5 in image\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n\n\n:::\n:::\n\n\n\nNow weights.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np2 <- mydata %>% ggplot(aes(x=Weight)) + geom_histogram() \nplot(p2)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](eda2_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\nfigure_file = here(\"starter-analysis-exercise\",\"results\",\"figures\",\"weight-distribution.png\")\nggsave(filename = figure_file, plot=p2) \n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nSaving 7 x 5 in image\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n\n\n:::\n:::\n\n\n\nNow height as function of weight.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np3 <- mydata %>% ggplot(aes(x=Height, y=Weight)) + geom_point() + geom_smooth(method='lm')\nplot(p3)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](eda2_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\nfigure_file = here(\"starter-analysis-exercise\",\"results\",\"figures\",\"height-weight.png\")\nggsave(filename = figure_file, plot=p3) \n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nSaving 7 x 5 in image\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n:::\n\n\n\nOnce more height as function of weight, stratified by gender. Note that there is so little data, it's a bit silly. But we'll plot it anyway.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np4 <- mydata %>% ggplot(aes(x=Height, y=Weight, color = Gender)) + geom_point() + geom_smooth(method='lm')\nplot(p4)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in qt((1 - level)/2, df): NaNs produced\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in max(ids, na.rm = TRUE): no non-missing arguments to max; returning\n-Inf\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](eda2_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n\n```{.r .cell-code}\nfigure_file = here(\"starter-analysis-exercise\",\"results\",\"figures\",\"height-weight-stratified.png\")\nggsave(filename = figure_file, plot=p4) \n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nSaving 7 x 5 in image\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in qt((1 - level)/2, df): NaNs produced\nWarning in qt((1 - level)/2, df): no non-missing arguments to max; returning\n-Inf\n```\n\n\n:::\n:::\n\n\n\n\n\n# Notes\n\nFor your own explorations, tables and figures can be \"quick and dirty\". As long as you can see what's going on, there is no need to polish them. That's in contrast to figures you'll produce for your final products (paper, report, presentation, website, etc.). Those should look as nice, polished and easy to understand as possible.\n\n# Box plot with Agecat and Height\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Ensure Agecat is a factor\nmydata <- mydata %>%\n  mutate(Agecat = as.factor(Agecat))\n\nmydata$Agecat\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0 0 3 2 3 2 3 2 3\nLevels: 0 2 3\n```\n\n\n:::\n\n```{.r .cell-code}\n# Ensure Emp_status is a factor with meaningful labels\nmydata$Agecat <- factor(mydata$Agecat, \n                            levels = c(0, 1, 2, 3), \n                            labels = c(\"<=30 Yo\", \"31-40 Yo\", \"41-50 Yo\", \"51 or more\"))\n\n# Create the boxplot\np5 <- mydata %>% ggplot(aes(x = Agecat, y = Height, fill = Agecat)) + \n  geom_boxplot() + \n  labs(title = \"Boxplot of Height by Agecat\",\n       x = \"Age category\",\n       y = \"Height\") +\n  theme_minimal() +\n  theme_minimal() +\n  scale_fill_manual(values = c(\"<=30 Yo\" = \"#1f78b4\",  # Blue\n                               \"31-40 Yo\" = \"#33a02c\",  # Green\n                               \"41-50 Yo\" = \"#e31a1c\",# Red\n                               \"51 or more\"= \"#CA1BDE\")) +  \n  theme(legend.position = \"none\") \nplot(p5)\n```\n\n::: {.cell-output-display}\n![](eda2_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Save the figure\nfigure_file = here(\"starter-analysis-exercise\", \"results\", \"figures\", \"boxplot.png\")\nggsave(filename = figure_file, plot = p5)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nSaving 7 x 5 in image\n```\n\n\n:::\n:::\n\n\n\n# Scatter plot with weight and chol\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np6 <- mydata %>% ggplot(aes(x=Weight, y=Chol, color = Agecat)) + \n  geom_point() + \n  labs(title = \"Scatterplot of Weight and Total Cholesterol\",\n       x = \"Weight\",\n       y = \"Chol\") +\n  theme_minimal()+\n  scale_color_manual(values = c(\"<=30 Yo\" = \"#1f78b4\",  # Blue\n                               \"31-40 Yo\" = \"#33a02c\",  # Green\n                               \"41-50 Yo\" = \"#e31a1c\",# Red\n                               \"51 or more\"= \"#CA1BDE\"))\n\nplot(p6)\n```\n\n::: {.cell-output-display}\n![](eda2_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n\n```{.r .cell-code}\nfigure_file = here(\"starter-analysis-exercise\", \"results\", \"figures\", \"scatterplot.png\")\nggsave(filename = figure_file, plot=p6)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nSaving 7 x 5 in image\n```\n\n\n:::\n:::",
    "supporting": [
      "eda2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}